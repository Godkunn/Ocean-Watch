{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import L from'leaflet';import'leaflet/dist/leaflet.css';// Fix for default markers in Leaflet\nimport{jsx as _jsx}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'});const Map=_ref=>{let{reports,socialPosts}=_ref;const mapRef=useRef(null);const[map,setMap]=useState(null);const[markers,setMarkers]=useState([]);useEffect(()=>{if(!map){const leafletMap=L.map(mapRef.current).setView([20.5937,78.9629],5);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'}).addTo(leafletMap);setMap(leafletMap);}},[map]);useEffect(()=>{if(!map)return;// Clear existing markers\nmarkers.forEach(marker=>map.removeLayer(marker));const newMarkers=[];// Add report markers\nreports.forEach(report=>{if(report.location&&report.location.coordinates){var _report$userId;const marker=L.marker([report.location.coordinates[1],report.location.coordinates[0]]).addTo(map).bindPopup(\"\\n            <strong>\".concat(report.hazardType.replace('_',' ').toUpperCase(),\"</strong><br>\\n            \").concat(report.description,\"<br>\\n            <small>Reported by: \").concat(((_report$userId=report.userId)===null||_report$userId===void 0?void 0:_report$userId.username)||'Unknown',\"</small>\\n          \"));newMarkers.push(marker);}});// Add social post markers\nsocialPosts.forEach(post=>{const marker=L.marker([post.location.latitude,post.location.longitude],{icon:L.icon({iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],className:'social-marker'})}).addTo(map).bindPopup(\"\\n          <strong>Social Media Post (\".concat(post.platform,\")</strong><br>\\n          \").concat(post.text,\"<br>\\n          <small>Posted by: \").concat(post.user,\"</small>\\n        \"));newMarkers.push(marker);});setMarkers(newMarkers);},[map,reports,socialPosts]);return/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:{height:'500px',width:'100%'}});};export default Map;","map":{"version":3,"names":["React","useEffect","useRef","useState","L","jsx","_jsx","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Map","_ref","reports","socialPosts","mapRef","map","setMap","markers","setMarkers","leafletMap","current","setView","tileLayer","attribution","addTo","forEach","marker","removeLayer","newMarkers","report","location","coordinates","_report$userId","bindPopup","concat","hazardType","replace","toUpperCase","description","userId","username","push","post","latitude","longitude","icon","iconSize","iconAnchor","popupAnchor","className","platform","text","user","ref","style","height","width"],"sources":["C:/Users/Hp/Desktop/ocean-hazard-platform/frontend/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\n// Fix for default markers in Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\nconst Map = ({ reports, socialPosts }) => {\r\n  const mapRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [markers, setMarkers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!map) {\r\n      const leafletMap = L.map(mapRef.current).setView([20.5937, 78.9629], 5);\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n      }).addTo(leafletMap);\r\n      setMap(leafletMap);\r\n    }\r\n  }, [map]);\r\n\r\n  useEffect(() => {\r\n    if (!map) return;\r\n\r\n    // Clear existing markers\r\n    markers.forEach(marker => map.removeLayer(marker));\r\n    const newMarkers = [];\r\n\r\n    // Add report markers\r\n    reports.forEach(report => {\r\n      if (report.location && report.location.coordinates) {\r\n        const marker = L.marker([report.location.coordinates[1], report.location.coordinates[0]])\r\n          .addTo(map)\r\n          .bindPopup(`\r\n            <strong>${report.hazardType.replace('_', ' ').toUpperCase()}</strong><br>\r\n            ${report.description}<br>\r\n            <small>Reported by: ${report.userId?.username || 'Unknown'}</small>\r\n          `);\r\n        newMarkers.push(marker);\r\n      }\r\n    });\r\n\r\n    // Add social post markers\r\n    socialPosts.forEach(post => {\r\n      const marker = L.marker([post.location.latitude, post.location.longitude], {\r\n        icon: L.icon({\r\n          iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n          iconSize: [25, 41],\r\n          iconAnchor: [12, 41],\r\n          popupAnchor: [1, -34],\r\n          className: 'social-marker'\r\n        })\r\n      })\r\n        .addTo(map)\r\n        .bindPopup(`\r\n          <strong>Social Media Post (${post.platform})</strong><br>\r\n          ${post.text}<br>\r\n          <small>Posted by: ${post.user}</small>\r\n        `);\r\n      newMarkers.push(marker);\r\n    });\r\n\r\n    setMarkers(newMarkers);\r\n  }, [map, reports, socialPosts]);\r\n\r\n  return <div ref={mapRef} style={{ height: '500px', width: '100%' }} />;\r\n};\r\n\r\nexport default Map;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}