{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hp\\\\Desktop\\\\ocean-hazard-platform\\\\frontend\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers in Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst Map = ({\n  reports,\n  socialPosts\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  useEffect(() => {\n    // Initialize map only once\n    if (!mapInstance.current && mapRef.current) {\n      mapInstance.current = L.map(mapRef.current).setView([20.5937, 78.9629], 5);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      }).addTo(mapInstance.current);\n    }\n\n    // Cleanup function\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    // Clear existing markers\n    markersRef.current.forEach(marker => {\n      if (mapInstance.current) {\n        mapInstance.current.removeLayer(marker);\n      }\n    });\n    markersRef.current = [];\n\n    // Add report markers\n    reports.forEach(report => {\n      if (report.location && report.location.coordinates) {\n        var _report$userId;\n        const marker = L.marker([report.location.coordinates[1], report.location.coordinates[0]]).addTo(mapInstance.current).bindPopup(`\n            <strong>${report.hazardType.replace('_', ' ').toUpperCase()}</strong><br>\n            ${report.description}<br>\n            <small>Reported by: ${((_report$userId = report.userId) === null || _report$userId === void 0 ? void 0 : _report$userId.username) || 'Unknown'}</small>\n          `);\n        markersRef.current.push(marker);\n      }\n    });\n\n    // Add social post markers\n    socialPosts.forEach(post => {\n      const marker = L.marker([post.location.latitude, post.location.longitude], {\n        icon: L.icon({\n          iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n          iconSize: [25, 41],\n          iconAnchor: [12, 41],\n          popupAnchor: [1, -34],\n          className: 'social-marker'\n        })\n      }).addTo(mapInstance.current).bindPopup(`\n          <strong>Social Media Post (${post.platform})</strong><br>\n          ${post.text}<br>\n          <small>Posted by: ${post.user}</small>\n        `);\n      markersRef.current.push(marker);\n    });\n  }, [reports, socialPosts]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      height: '500px',\n      width: '100%'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 10\n  }, this);\n};\n_s(Map, \"PpBl28CGivYfODHMHdBihbSzKC4=\");\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Map","reports","socialPosts","_s","mapRef","mapInstance","markersRef","current","map","setView","tileLayer","attribution","addTo","remove","forEach","marker","removeLayer","report","location","coordinates","_report$userId","bindPopup","hazardType","replace","toUpperCase","description","userId","username","push","post","latitude","longitude","icon","iconSize","iconAnchor","popupAnchor","className","platform","text","user","ref","style","height","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Hp/Desktop/ocean-hazard-platform/frontend/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\n// Fix for default markers in Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\nconst Map = ({ reports, socialPosts }) => {\r\n  const mapRef = useRef(null);\r\n  const mapInstance = useRef(null);\r\n  const markersRef = useRef([]);\r\n\r\n  useEffect(() => {\r\n    // Initialize map only once\r\n    if (!mapInstance.current && mapRef.current) {\r\n      mapInstance.current = L.map(mapRef.current).setView([20.5937, 78.9629], 5);\r\n      \r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n      }).addTo(mapInstance.current);\r\n    }\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      if (mapInstance.current) {\r\n        mapInstance.current.remove();\r\n        mapInstance.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!mapInstance.current) return;\r\n\r\n    // Clear existing markers\r\n    markersRef.current.forEach(marker => {\r\n      if (mapInstance.current) {\r\n        mapInstance.current.removeLayer(marker);\r\n      }\r\n    });\r\n    markersRef.current = [];\r\n\r\n    // Add report markers\r\n    reports.forEach(report => {\r\n      if (report.location && report.location.coordinates) {\r\n        const marker = L.marker([report.location.coordinates[1], report.location.coordinates[0]])\r\n          .addTo(mapInstance.current)\r\n          .bindPopup(`\r\n            <strong>${report.hazardType.replace('_', ' ').toUpperCase()}</strong><br>\r\n            ${report.description}<br>\r\n            <small>Reported by: ${report.userId?.username || 'Unknown'}</small>\r\n          `);\r\n        markersRef.current.push(marker);\r\n      }\r\n    });\r\n\r\n    // Add social post markers\r\n    socialPosts.forEach(post => {\r\n      const marker = L.marker([post.location.latitude, post.location.longitude], {\r\n        icon: L.icon({\r\n          iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n          iconSize: [25, 41],\r\n          iconAnchor: [12, 41],\r\n          popupAnchor: [1, -34],\r\n          className: 'social-marker'\r\n        })\r\n      })\r\n        .addTo(mapInstance.current)\r\n        .bindPopup(`\r\n          <strong>Social Media Post (${post.platform})</strong><br>\r\n          ${post.text}<br>\r\n          <small>Posted by: ${post.user}</small>\r\n        `);\r\n      markersRef.current.push(marker);\r\n    });\r\n  }, [reports, socialPosts]);\r\n\r\n  return <div ref={mapRef} style={{ height: '500px', width: '100%' }} />;\r\n};\r\n\r\nexport default Map;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}