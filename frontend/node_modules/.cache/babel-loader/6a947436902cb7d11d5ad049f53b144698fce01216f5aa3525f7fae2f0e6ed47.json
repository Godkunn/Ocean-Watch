{"ast":null,"code":"import _objectSpread from\"C:/Users/Hp/Desktop/ocean-hazard-platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReportForm=_ref=>{let{onReportSubmit,token}=_ref;const[formData,setFormData]=useState({hazardType:'high_waves',description:'',latitude:'',longitude:'',severity:'medium'});const[files,setFiles]=useState([]);const handleInputChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleFileChange=e=>{setFiles(Array.from(e.target.files));};const handleSubmit=async e=>{e.preventDefault();const data=new FormData();data.append('hazardType',formData.hazardType);data.append('description',formData.description);data.append('latitude',formData.latitude);data.append('longitude',formData.longitude);data.append('severity',formData.severity);files.forEach(file=>{data.append('media',file);});try{const response=await fetch('http://localhost:5000/api/reports',{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)},body:data});if(response.ok){alert('Report submitted successfully!');setFormData({hazardType:'high_waves',description:'',latitude:'',longitude:'',severity:'medium'});setFiles([]);onReportSubmit();}else{const errorData=await response.json();alert(\"Error: \".concat(errorData.message));}}catch(error){console.error('Error submitting report:',error);alert('Error submitting report. Please try again.');}};const getCurrentLocation=()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{setFormData(_objectSpread(_objectSpread({},formData),{},{latitude:position.coords.latitude,longitude:position.coords.longitude}));},error=>{console.error('Error getting location:',error);alert('Could not get your current location. Please enter manually.');});}else{alert('Geolocation is not supported by this browser.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"report-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Report Ocean Hazard\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Hazard Type:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"hazardType\",value:formData.hazardType,onChange:handleInputChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"tsunami\",children:\"Tsunami\"}),/*#__PURE__*/_jsx(\"option\",{value:\"storm_surge\",children:\"Storm Surge\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high_waves\",children:\"High Waves\"}),/*#__PURE__*/_jsx(\"option\",{value:\"swell_surge\",children:\"Swell Surge\"}),/*#__PURE__*/_jsx(\"option\",{value:\"coastal_current\",children:\"Coastal Current\"}),/*#__PURE__*/_jsx(\"option\",{value:\"abnormal_sea\",children:\"Abnormal Sea Behavior\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleInputChange,required:true,rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Location:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-inputs\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"latitude\",placeholder:\"Latitude\",value:formData.latitude,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"longitude\",placeholder:\"Longitude\",value:formData.longitude,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:getCurrentLocation,children:\"Use Current Location\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Severity:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"severity\",value:formData.severity,onChange:handleInputChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"critical\",children:\"Critical\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Upload Media (optional):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,onChange:handleFileChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit Report\"})]})]});};export default ReportForm;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ReportForm","_ref","onReportSubmit","token","formData","setFormData","hazardType","description","latitude","longitude","severity","files","setFiles","handleInputChange","e","_objectSpread","target","name","value","handleFileChange","Array","from","handleSubmit","preventDefault","data","FormData","append","forEach","file","response","fetch","method","headers","concat","body","ok","alert","errorData","json","message","error","console","getCurrentLocation","navigator","geolocation","getCurrentPosition","position","coords","className","children","onSubmit","onChange","required","rows","type","step","placeholder","onClick","multiple"],"sources":["C:/Users/Hp/Desktop/ocean-hazard-platform/frontend/src/components/ReportForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst ReportForm = ({ onReportSubmit, token }) => {\r\n  const [formData, setFormData] = useState({\r\n    hazardType: 'high_waves',\r\n    description: '',\r\n    latitude: '',\r\n    longitude: '',\r\n    severity: 'medium'\r\n  });\r\n  const [files, setFiles] = useState([]);\r\n\r\n  const handleInputChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    setFiles(Array.from(e.target.files));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    const data = new FormData();\r\n    data.append('hazardType', formData.hazardType);\r\n    data.append('description', formData.description);\r\n    data.append('latitude', formData.latitude);\r\n    data.append('longitude', formData.longitude);\r\n    data.append('severity', formData.severity);\r\n    \r\n    files.forEach(file => {\r\n      data.append('media', file);\r\n    });\r\n    \r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/reports', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: data\r\n      });\r\n      \r\n      if (response.ok) {\r\n        alert('Report submitted successfully!');\r\n        setFormData({\r\n          hazardType: 'high_waves',\r\n          description: '',\r\n          latitude: '',\r\n          longitude: '',\r\n          severity: 'medium'\r\n        });\r\n        setFiles([]);\r\n        onReportSubmit();\r\n      } else {\r\n        const errorData = await response.json();\r\n        alert(`Error: ${errorData.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting report:', error);\r\n      alert('Error submitting report. Please try again.');\r\n    }\r\n  };\r\n\r\n  const getCurrentLocation = () => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          setFormData({\r\n            ...formData,\r\n            latitude: position.coords.latitude,\r\n            longitude: position.coords.longitude\r\n          });\r\n        },\r\n        (error) => {\r\n          console.error('Error getting location:', error);\r\n          alert('Could not get your current location. Please enter manually.');\r\n        }\r\n      );\r\n    } else {\r\n      alert('Geolocation is not supported by this browser.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"report-form\">\r\n      <h3>Report Ocean Hazard</h3>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <label>Hazard Type:</label>\r\n          <select name=\"hazardType\" value={formData.hazardType} onChange={handleInputChange} required>\r\n            <option value=\"tsunami\">Tsunami</option>\r\n            <option value=\"storm_surge\">Storm Surge</option>\r\n            <option value=\"high_waves\">High Waves</option>\r\n            <option value=\"swell_surge\">Swell Surge</option>\r\n            <option value=\"coastal_current\">Coastal Current</option>\r\n            <option value=\"abnormal_sea\">Abnormal Sea Behavior</option>\r\n            <option value=\"other\">Other</option>\r\n          </select>\r\n        </div>\r\n        \r\n        <div className=\"form-group\">\r\n          <label>Description:</label>\r\n          <textarea \r\n            name=\"description\" \r\n            value={formData.description} \r\n            onChange={handleInputChange} \r\n            required \r\n            rows=\"3\"\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"form-group\">\r\n          <label>Location:</label>\r\n          <div className=\"location-inputs\">\r\n            <input\r\n              type=\"number\"\r\n              step=\"any\"\r\n              name=\"latitude\"\r\n              placeholder=\"Latitude\"\r\n              value={formData.latitude}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"number\"\r\n              step=\"any\"\r\n              name=\"longitude\"\r\n              placeholder=\"Longitude\"\r\n              value={formData.longitude}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <button type=\"button\" onClick={getCurrentLocation}>Use Current Location</button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"form-group\">\r\n          <label>Severity:</label>\r\n          <select name=\"severity\" value={formData.severity} onChange={handleInputChange} required>\r\n            <option value=\"low\">Low</option>\r\n            <option value=\"medium\">Medium</option>\r\n            <option value=\"high\">High</option>\r\n            <option value=\"critical\">Critical</option>\r\n          </select>\r\n        </div>\r\n        \r\n        <div className=\"form-group\">\r\n          <label>Upload Media (optional):</label>\r\n          <input type=\"file\" multiple onChange={handleFileChange} />\r\n        </div>\r\n        \r\n        <button type=\"submit\">Submit Report</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}